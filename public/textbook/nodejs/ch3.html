<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Глава 3. Express</title>
    <style>
        @import url("../styles/styles.css");
        @import url("../modules/vs2015.min.css");
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../modules/jquery-3.7.1.min.js"><'+'/script>')</script>
    <script src="../modules/highlight.min.js"></script>
    <script src="../scripts/body_scripts.js"></script>
    <script src="../common/counters_head.js"></script>
</head>


<body>
<script src="../common/counters_body.js"></script>

<h1>Глава 3. Express</h1>

<h2>Введение в Express</h2>
<p>Сайт Express характеризует Express как «<i>минималистичный и гибкий фреймворк
для веб-приложений Node.js, обеспечивающий набор возможностей для построения веб- и мобильных приложений</i>». Что же это такое на самом деле? Разобьем
описание на составные части:</p>
<ul>
    <li><b>Минималистичный</b>. Много раз разработчики фреймворков забывали, что лучше меньше, да лучше. Философия Express заключается в обеспечении минимальной прослойки между вами и сервером. Это не говорит о слабой надежности фреймворка или недостаточном количестве его полезных возможностей. Просто он в меньшей степени становится у вас на пути, позволяя более полно выражать свои идеи. Express предоставляет вам минималистичный фреймворк, а вы можете добавлять необходимый функционал в разных его частях, заменяя то, что вам никогда не понадобится. Это глоток свежего воздуха, ведь многие фреймворки создают раздутые, непонятные и сложные проекты еще до того, как вы написали хотя бы одну строчку кода. Зачастую первой задачей становится отсечение ненужного функционала или замена того, который не соответствует требованиям. Express практикует другой подход, позволяя вам добавлять то, что нужно, там, где нужно.</li>
    <li><b>Гибкий</b>. Механизм действия Express очень прост: он принимает HTTP-запрос от клиента (которым может быть браузер, мобильное устройство, другой сервер, десктопное приложение — одним словом, все, что использует HTTP) и возвращает HTTP-ответ. Этот базовый шаблон описывает практически все, связанное с Интернетом, что делает приложения Express чрезвычайно гибкими.</li>
    <li><b>Фреймворк для веб-приложений</b>. Наверное, более точным описанием будет «серверная часть фреймворка для веб-приложений». На сегодня под «фреймворками для веб-приложений» обычно имеются в виду фреймворки одностраничных приложений, такие как <i>React</i>, <i>Angular</i> или <i>Vue</i>. Тем не менее, за исключением небольшой группы отдельных приложений, большинство веб-приложений должно обмениваться данными и взаимодействовать с другими сервисами. Обычно это происходит через веб-API, который можно рассматривать как серверный компонент фреймворка веб-приложений. Обратите внимание, что построение всего приложения с рендерингом только на стороне сервера по-прежнему возможно (а иногда и желательно). В этом случае Express вполне может быть фреймворком всего веб-приложения!</li>
    <li><b>Быстрый</b>. Express, став одним из лучших фреймворков для платформы Node.js, привлек много внимания со стороны больших компаний с высокопроизводительными и сильно нагруженными веб-сайтами. Это вынудило команду по разработке Express сконцентрироваться на производительности, и теперь Express — лидер в этом сегменте.</li>
    <li><b>Некатегоричный</b>. Одними из отличительных особенностей экосистемы JavaScript являются ее размер и разнообразие. Ввиду того что Express зачастую занимает центральную позицию в разработке веб-приложений в Node.js, существуют сотни (если не тысячи) страниц сообщества, где подробно рассматриваются приложения Express. Разработчики Express, в свою очередь, предоставили чрезвычайно гибкую систему разработки промежуточного ПО, которая упрощает использование выбранных вами компонентов при создании приложения. В процессе разработки можно заметить, что Express отключает встроенные компоненты в пользу настраиваемого промежуточного ПО. </li>
</ul>

<h2>Приложения на стороне сервера и на стороне клиента</h2>
<p>В <i>приложении на стороне сервера</i> рендеринг страниц (включая HTML, CSS, изображения и другие мультимедийные объекты и JavaScript) происходит на сервере, и затем они отправляются клиенту. В <i>приложении на стороне клиента</i>, напротив, большая часть пользовательского интерфейса отображается из исходного кода приложения, отправка которого происходит однократно. То есть после получения начального (обычно очень минимального) HTML-кода браузер динамически преобразует DOM с помощью JavaScript. Отображение новых страниц не зависит от сервера, хотя необработанные данные по-прежнему поступают с него.</p>
<p>Приложения на стороне сервера были стандартом до 1999 г. Фактически
термин «веб-приложение» был официально введен в этом году. Я считаю период
между 1999 и 2012 гг. эпохой Web 2.0, во время которой происходило развитие
технологий и технических средств, ставших в дальнейшем приложениями на стороне клиента. К 2012 г., когда смартфоны прочно вошли в обиход, отправка как
можно меньшего объема информации через сеть стала общепринятым подходом,
что способствовало развитию приложений на стороне клиента.</p>
<p>Приложения на стороне сервера часто называются <b>приложениями с рендерингом
на стороне сервера</b> (<i>server-side rendered</i>, <i>SSR</i>), а приложения на стороне клиента — <b>одностраничными приложениями</b> (<i>SPA</i>). </p>
<p>Приложения на стороне клиента полностью реализуются в таких средах, как React, Angular и Vue. Мне всегда казалось, что «одностраничные приложения» — не совсем точное название, ведь с точки зрения пользователя они могут состоять из множества страниц. Единственное отличие состоит в том, что страницы загружаются с сервера или динамически отображаются на стороне клиента.
</p>
На самом деле грань между приложениями на стороне сервера и на стороне клиента размыта. В большинстве приложений на стороне клиента есть
2–3 HTML-пакета, которые могут быть отправлены клиенту (например, открытый
интерфейс авторизации или обычный интерфейс и интерфейс администратора).
Кроме того, для увеличения производительности загрузки первой страницы и для
поисковой оптимизации (search engine optimization, SEO) одностраничные приложения зачастую комбинируются с рендерингом на стороне сервера.
Как правило, если с сервера отправляется небольшое количество HTML-файлов
(обычно от одного до трех), а интерфейс пользователя многофункциональный,
с большим количеством страниц и основан на динамическом управлении объектной моделью документов, то применяется рендеринг на стороне клиента. Бо'льшая
часть данных (обычно в формате JSON) и мультимедийных ресурсов для различных представлений по-прежнему загружается из сети.
Для Express не имеет значения, создаете вы приложение на стороне сервера
или на стороне клиента: он хорош в обоих случаях. Для него безразлично, какое
количество HTML-пакетов вы предоставляете: один или сотню.
Хотя преобладание архитектуры одностраничных веб-приложений неоспоримо,
в начале книги приводятся примеры для приложений на стороне сервера. Они все еще
актуальны, а разница между предоставлением одного или нескольких HTML-пакетов
незначительна.

<h2>Краткая история Express</h2>
Создатель Express Ти Джей Головайчук описывает Express как веб-фреймворк,
вдохновленный основанным на Ruby веб-фреймворком Sinatra. Ничего удивительного, что Express заимствует идеи у фреймворка, написанного на Ruby: последний,
будучи нацеленным на бо'льшую эффективность веб-разработки, ее ускорение
и упрощение ее сопровождения, стал источником множества замечательных подходов к веб-разработке.
Хотя Express был вдохновлен фреймворком Sinatra, он тесно переплетен с Connect — подключаемой библиотекой для Node. Connect использует термин «промежуточное ПО» (middleware) для описания подключаемых модулей Node, которые
могут в различной степени обрабатывать веб-запросы. В 2014 г. в версии 4.0 Express
была удалена зависимость от Connect, но этот фреймворк по-прежнему включает
позаимствованную из Connect концепцию промежуточного ПО.














</body>
</html>